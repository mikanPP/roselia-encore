"use strict";!function(t,e){"use strict";var n,r,o,i,a=function(t,e){var n=new Image,r=t.src||t;"data:"!==r.substring(0,5)&&(n.crossOrigin="Anonymous"),n.onload=function(){var t,r,o,i=(t=n.width,r=n.height,(o=document.createElement("canvas")).setAttribute("width",t),o.setAttribute("height",r),o.getContext("2d"));i.drawImage(n,0,0);var a=i.getImageData(0,0,n.width,n.height);e&&e(a.data)},n.src=r},c=function(t){return["rgb(",t,")"].join("")},l=function(t,e){return{name:c(t),count:e}},s={};s.colors=function(t,e){var n=(e=e||{}).exclude||[],r=e.paletteSize||10;a(t,function(t){for(var o={},i="",a=[],s=0;s<t.length;s+=4)a[0]=t[s],a[1]=t[s+1],a[2]=t[s+2],i=a.join(","),-1===a.indexOf(void 0)&&0!==t[s+3]&&-1===n.indexOf(c(i))&&(o[i]=i in o?o[i]+1:1);if(e.success){var u=function(t,e){if(t.length>e)return t.slice(0,e);for(var n=t.length-1;n<e-1;n++)t.push(l("0,0,0",0));return t}(function(t){var e=[];for(var n in t)e.push(l(n,t[n]));return e.sort(function(t,e){return e.count-t.count}),e}(o),r+1);e.success({dominant:u[0].name,secondary:u[1].name,palette:u.map(function(t){return t.name}).slice(1)})}})},t.adovecHaishoku=t.adovecHaishoku||{forEach(t,e){for(let n in t)e(t[n],n,t)},extend:(n=function(t){var e=Object.prototype.toString;return function(){return e.call(arguments[0])==="[object "+t+"]"}},r=n("Object"),o=n("Array"),i=n("Boolean"),function t(){var e,n,a,c,l=0,s=!1;for(i(arguments[0])&&(l=1,s=arguments[0]),c=arguments.length-1;c>l;c--)if(n=arguments[c-1],a=arguments[c],r(a)||o(a))for(var u in a)if(e=a[u],s&&(r(e)||o(e))){var d=t(s,r(e)?{}:[],e);n[u]=d}else n[u]=a[u];else n=a;return n}),deepExtend(...t){return this.extend(!0,...t)},splitRGB:t=>t.match(/\d+/g),getYIQ(t){let e=this.splitRGB(t);return(299*e[0]+587*e[1]+114*e[2])/1e3},getNormalizedTextColor(t,e,n){return this.getYIQ(t)>=128?n:e},apply(t){let e=this.deepExtend({},{image:null,changeText:!1,textColors:{light:"#fff",dark:"#000"},exclude:["rgb(0,0,0)"],target:"body",text:null},t),n=e.image,r=this,o=document.querySelectorAll.bind(document);s.colors(n,{paletteSize:20,exclude:e.exclude,success(t){let n=r.splitRGB(t.dominant)?t.dominant:t.palette.find(t=>r.splitRGB(t))||"rgb(255,255,255)";o(e.target).forEach(t=>{t.style.transition="background-color 1800ms ease",t.style.backgroundColor=n}),e.changeText&&o(e.text||e.target).forEach(t=>{t.style.transition="color 1800ms ease",t.style.color=r.getNormalizedTextColor(n,e.textColors.light,e.textColors.dark)})}})}}}(window);